<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.digitalchina.sport.mgr.resource.dao.MainStadiumDao">
    <select id="getAllStadiumList" resultType="java.util.Map" parameterType="HashMap">
        SELECT
        ms.id,ms.name,ms.provincial_level,ms.city_level,
        ms.district_level,ms.trading_area,ms.address,ms.telephone,
        ms.open_time,ms.introduction,ms.lng,ms.lat,ms.classify,ms.is_special,
        ms.create_time,
        (case ms.status  when '1' then '正常' WHEN '0' THEN '闭馆' WHEN '2' THEN '下线' ELSE '其他' END) as status
        FROM main_stadium ms
        <where>
            <choose>
                <when test="name !=null and name !='' ">
                    ms.NAME =#{name}
                </when>
                <otherwise>
                    1 = 1
                </otherwise>
            </choose>
        </where>
        order by ms.create_time desc
        limit #{startIndex},#{endIndex}
    </select>
    <select id="findTotalCount" resultType="java.lang.Integer" parameterType="HashMap">
        SELECT count(*) from main_stadium ms
        <where>
            <choose>
                <when test="name !=null and name !='' ">
                    ms.NAME =#{name}
                </when>
                <otherwise>
                    1 = 1
                </otherwise>
            </choose>
        </where>
    </select>
</mapper>