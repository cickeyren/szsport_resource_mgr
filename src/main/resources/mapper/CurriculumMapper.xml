<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.digitalchina.sport.mgr.resource.dao.CurriculumMapper">
    <resultMap id="BaseResultMap" type="com.digitalchina.sport.mgr.resource.model.Curriculum">
        <!--
          WARNING - @mbggenerated
        -->
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="training_institutions_id" property="training_institutions_id" jdbcType="VARCHAR"/>
        <result column="cooperative_merchant_id" property="cooperative_merchant_id" jdbcType="VARCHAR"/>
        <result column="img_url" property="img_url" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="teachers" property="teachers" jdbcType="VARCHAR"/>
        <result column="train_type" property="train_type" jdbcType="VARCHAR"/>
        <result column="content" property="content" jdbcType="VARCHAR"/>
        <result column="address" property="address" jdbcType="VARCHAR"/>
        <result column="enrollment_required" property="enrollment_required" jdbcType="VARCHAR"/>
        <result column="phone" property="phone" jdbcType="VARCHAR"/>
        <result column="enrollment_read" property="enrollment_read" jdbcType="VARCHAR"/>
        <result column="create_date" property="create_date" jdbcType="TIMESTAMP"/>
        <result column="recommend_time" property="recommend_time" jdbcType="TIMESTAMP"/>
        <result column="recommend_level" property="recommend_level" jdbcType="INTEGER"/>
        <result column="status" property="status" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
        -->
        id, training_institutions_id, cooperative_merchant_id, img_url, name, teachers, train_type,
        content, address, enrollment_required, phone, enrollment_read, create_date, recommend_time,
        recommend_level
    </sql>
    <select id="getCurriculum" resultMap="BaseResultMap">
        SELECT
        c.id,
        c.training_institutions_id,
        c.cooperative_merchant_id,
        c.img_url,
        c.`name`,
        c.teachers,
        ct.`name` AS train_type,
        c.content,
        c.address,
        c.enrollment_required,
        c.phone,
        c.enrollment_read,
        c.create_date,
        c.recommend_time,
        c.recommend,
        c.recommend_level,
        c.`status`
        FROM
        curriculum c,
        curriculum_type ct
        WHERE
        c.train_type = ct.`code`
        <if test="training_institutions_id != null and training_institutions_id != ''">
            AND   c.training_institutions_id = #{training_institutions_id}
        </if>
    </select>
    <select id="getCurriculumByNameExHas" resultMap="BaseResultMap">
        SELECT
        c.id,
        c.training_institutions_id,
        c.cooperative_merchant_id,
        c.img_url,
        c.`name`,
        c.teachers,
        ct.`name` AS train_type,
        c.content,
        c.address,
        c.enrollment_required,
        c.phone,
        c.enrollment_read,
        c.create_date,
        c.recommend_time,
        c.recommend,
        c.recommend_level,
        c.`status`
        FROM
        curriculum c,
        curriculum_type ct
        WHERE
        c.train_type = ct.`code`
        <if test="training_institutions_id != null and training_institutions_id != ''">
            AND   c.training_institutions_id = #{training_institutions_id}
        </if>
        <if test="name != null and name != ''">
            AND c.name  LIKE CONCAT('%',#{name},'%')
        </if>
        <if test="ids!= null">
            AND c.id NOT IN
            <foreach collection="ids" item="item"
                     index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
    </select>
    <select id="getCurriculumByIds" resultMap="BaseResultMap">
        SELECT
        c.id,
        c.training_institutions_id,
        c.cooperative_merchant_id,
        c.img_url,
        c.`name`,
        c.teachers,
        ct.`name` AS train_type,
        c.content,
        c.address,
        c.enrollment_required,
        c.phone,
        c.enrollment_read,
        c.create_date,
        c.recommend_time,
        c.recommend,
        c.recommend_level,
        c.`status`
        FROM
        curriculum c,
        curriculum_type ct
        WHERE
        c.train_type = ct.`code`
        <if test="training_institutions_id != null and training_institutions_id != ''">
            AND c.training_institutions_id = #{training_institutions_id}
        </if>
        <if test="ids != null">
            AND c.id IN
            <foreach collection="ids" item="item"
                     index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
    </select>
    <select id="getCurriculumByIdsNot" resultMap="BaseResultMap">
        SELECT
        c.id,
        c.training_institutions_id,
        c.cooperative_merchant_id,
        c.img_url,
        c.`name`,
        c.teachers,
        ct.`name` AS train_type,
        c.content,
        c.address,
        c.enrollment_required,
        c.phone,
        c.enrollment_read,
        c.create_date,
        c.recommend_time,
        c.recommend,
        c.recommend_level,
        c.`status`
        FROM
        curriculum c,
        curriculum_type ct
        WHERE
        c.train_type = ct.`code`
        <if test="training_institutions_id != null and training_institutions_id != ''">
           AND c.training_institutions_id = #{training_institutions_id}
        </if>
        <if test="ids!= null">
            AND c.id NOT IN
            <foreach collection="ids" item="item"
                     index="index" open="(" close=")" separator=",">
                #{item}
            </foreach>
        </if>
    </select>
</mapper>